# 📚 스터디 템플릿

## 📖 목차를 읽기 전에 든 생각
- 쿠버네티스를 써본적이 없는데 뭘까?

## 📝 내용 정리
### 쿠버네티스 구성
- 마스터 노드와 워커 노드라는 두 가지 종류의 노드로 구성되어있음
- 마스터 노드 : 클라이언트의 API 요청을 받고 워커 노드를 다루는 역할
- 워커 노드 : 실제 컨테이너 역할

### 매니페스트를 활용한 파드 실행
- 매니페스트 : 쿠버네티스 오브젝트를 생성하기 위한 메타 정보를 YAML, JSON 형식으로 작성한 파일

### 기능 정리
- 디플로이먼트 : 쿠버네티스를 구성하는 핵심 개념, 레플리카셋을 관리하는 컨트롤러
- 레플리카셋 : 명시되어있고 유지해야 하는 파드 개수에 대한 가용성을 보증하는 데 사용
    - 원하는 파드 개수만큼 유지시켜주는 역할을 하는 컨트롤러
- 스케일 : 디플로이먼트 YAML 파일을 수정해서 파드 개수를 조정하는 것
- 롤아웃 : 컨테이너 업데이트를 의미
- 롤백 : 롤아웃 이전의 컨테이너 상태로 되돌리는 것을 의미

### 서비스
- 클라이언트와 파드의 연결을 담당
- 수많은 파드의 탄생과 죽음이 반복되는 환경에서 클라이언트가 요청한 파드가 죽었고 새로운 파드가 생성되었을때는 어떻게 클라이언트와 서버를 연결할까?
    - 쿠버네티스 서비스를 사용하면 됨
    - 파드 셋을 정의하고 클라이언트가 그 파드들에 접근할 수 있는 정책을 정의하는 추상적 개념임
    - 서비스 디스커버리 : 서비스를 구성하는 개별 인스턴스를 찾는 프로세스를 의미
    - 서비스를 사용하면 파드 내부를 수정하지 않아도 외부로 노출시킬 수 있다는 장점이 있음

### ClusterIP
- 쿠버네티스 서비스의 기본 설정값으로 클러스터 내에서만 파드에 접근될 수 있도록 하는 유형

### NodePort
- 각 노드의 특정 포트를 통해 외부 접근을 제공하는 유형

### LoadBalancer
- 서비스에 고정된 공인 IP를 할당해 IP 및 포트 번호를 활용해 클러스터 외부에서 서비스에 접근할 수 있도록 하는 것

### ExtermalName
- 레코드를 통해 클러스터 외부 서비스로의 DNS 조회를 제공하는 유형
- 서비스가 클러스터 외부에 있는 외부 도메인을 가리키도록 설정할 수 있음

### 스토리지 볼륨
- 도커에서 도커 볼륨과 비슷한 개념
- 쿠버네티스 파드가 삭제된 후 다시 실행된다면 기존 컨테이너 내부에 존재하는 파일이 삭제되어 재실행 되더라도 데이터를 보전할 수 있는 스토리지임

### 볼륨의 종류
- EmptyDir : 파드 내부에서 임시적으로 사용하는 볼륨
    - 파드가 노드에 할당될 때 처음으로 생성되고 파드가 노드에서 실행하는 동안만 존재
    - 초기에 비어 있는 상태로 시작
    - 모든 컨테이너는 emptyDir 볼륨에 존재하는 동일한 파일을 읽고 쓸 수 있음
    - **파드가 노드에서 삭제되면 emptyDir 내부에 존재하는 데이터도 삭제**
- hostPath : 호스트 노드의 파일 시스템으로부터 파일을 마운트 하는 것을 의미
    - 노드 내부 경로에 볼륨을 두는 형식
    - 실행되는 노드가 동일하면 데이터가 유지됨
    - emptyDir과 다르게 서로 다른 파드가 동일한 데이터를 보관할 수 있다는게 단점이지만 노드 자체에 장애가 생기면 데이터를 유실하게 된다는 단점도 있음
    -**2024년 보안 이슈가 많아 쿠버네티스 공식 홈페이지에서는 가급적 사용하지 않을 것을 권고**
- PV : PersistentVolume의 약자로 외부 스토리지를 의미
    - PV(스토리지 자원)와 PVC(스토리지 동적 바인딩 요청 객체)를 이용해야함

### 스테이트풀셋
- 디플로이먼트와 비슷한 개념이지만 디플로이먼트를 구성하는 각 파드는 서로 대체가 가능하지만 스테이트풀셋을 구성하는 파드들은 서로 동일한 스펙이라고 해도 각 파드마다 독자적으로 유지됨

#### 헤드리스 서비스
- 파드들의 개별 네트워크를 식별하기 위해 필요한 서비스로 헤드리스 서비스는 ClusterIP가 없음

### 인그레스
- 쿠버네티스 클러스터 외부에서 내부에 존재하는 쿠버네티스 서비스에 접근하기 위해 HTTP/HTTPS를 활용한 라우팅 규칙을 제공하는 오브젝트
- 인그레스를 활용하면 로드밸런서 없이 외부에 노출시킬 수 있음

#### 헬름의 개념
- 쿠버네티스를 사용하면 하나의 애플리케이션을 실행하기위해 파드, 서비스 등 여러 리소스를 사용해야함 -> 여러개의 YMAL파일을 관리해야함 -> 헬름을 사용하면 유용함
- 쿠버네티스 클러스터에 애플리케이션 배포를 위해 필요한 파일들을 하나의 패키지 형태로 관리할 수 있기 때문

### 잡과 크론잡
- 크론탭과 유사함
- 잡 : 쿠버네티스 애플리케이션의 실행 및 종료에 초점을 맞춘 리소스 유형
    - 파드를 생성하고 지정된 수의 파드가 성공적으로 종료될 떄까지 계속해서 파드의 실행을 재시도
    - 지정된 수의 성공 완료 횟수에 도달하면 잡이 종료
- 크론잡 : 반복 일정에 따라 잡을 만듦
    - 크론탭과 비슷함


## 💡 전부 읽고 난 후기
- 분량에 비해 내용은 크지 않았던것 같다.
- 쿠버네티스를 어디서 어떻게 왜 사용하는지를 조금 더 구체적으로 알려줬음 좋았을 것 같다.

## ❓ 특별히 궁금했던 부분
- EC2에서 Docker만 사용해도 되는 경우와 쿠버네티스를 써야하는 경우는 무엇인가요? (쿠버네티스를 사용해본적이 없습니다)
    - 여러 개의 컨테이너를 실행하고 자동으로 관리하는 역할을 하는 것 같은데 EC2의 ELB같은걸로도 쿠버네티스를 대체할 수 있을까요?
- 쿠버네티스 CI/CD는 어떻게 구성이 되어야 할까?
    - 젠킨스 없이 CI/CD 배포가 가능할까?

## ⏳ 독서 과정 기록
- **총 독서 시간**: 
- **각 장별 소요 시간**:
  - Chapter 9 : 3시간 

## 🤔 이해도 점검 & 난이도 평가
- **어려웠던 부분 & 이유**:
  - 기능이 너무 많아서 기능을 다 이해하고 활용할 수 있을까.. 싶었다!!

- **자신의 이해도를 점수로 표현하기 (5점 만점)**
  - Chapter 9: ⭐⭐⭐½☆ (3.5/5)

- **특별하게 깨달음을 얻은 부분**
  - 쿠버네티스는 단순히 컨테이너를 실행하는 것이 아니라 자동화된 배포, 확장, 복구 등 여러가지 기능을 제공하는 플랫폼이라는 점을 이해했다.
  - 대규모 서비스에서는 쿠버네티스를 함께 활용하는것이 확장성과 유지보수성에 훨씬 유리하다는 점을 배웠다.